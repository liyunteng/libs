/*
 * test.c - test
 *
 * Date   : 2020/04/25
 */

#include "crc.h"
#include <stdio.h>
typedef struct {
    unsigned char *data;
    int data_len;
    unsigned int out;
} crc_test_pair;
int
main(void)
{
    unsigned char d1[] = {0x00, 0xb0, 0x0d, 0x59, 0x81, 0xeb, 0x00, 0x00, 0x00, 0x01, 0xe0, 0x42};
    //0x5e, 0x44, 0x05, 0x9a

    unsigned char d2[] = {
        0x02, 0xb0, 0x17, 0x00, 0x01, 0xc1, 0x00, 0x00, 0xe1, 0x01, 0xf0,
        0x00, 0x03, 0xe1, 0x00, 0xf0, 0x00, 0x1b, 0xe1, 0x01, 0xf0, 0x00,
    };
    //0x5c, 0x45, 0xfc, 0x3d

    unsigned char d3[] = {
        0x02, 0xb0, 0x29, 0x00, 0x01, 0xc1, 0x00, 0x00, 0xf0, 0x01, 0xf0,
        0x0c, 0x05, 0x04, 0x48, 0x44, 0x4d, 0x56, 0x88, 0x04, 0x0f, 0xff,
        0xfc, 0xfc, 0x1b, 0xf0, 0x11, 0xf0, 0x06, 0x28, 0x04, 0x4d, 0x40,
        0x28, 0xbf, 0x0f, 0xf1, 0x00, 0xf0, 0x00,
    };
    // 0x8c, 0x2e, 0x11, 0xfd

    crc_test_pair t[] = {
        {d1, sizeof(d1)/sizeof(d1[0]), 0x5E44059A},
        {d2, sizeof(d2)/sizeof(d2[0]), 0x5C45FC3D},
        {d3, sizeof(d3)/sizeof(d3[0]), 0x8C2E11FD}
    };

    for (size_t i = 0; i < sizeof(t)/sizeof(t[0]); i++) {
        unsigned int crc = 0;
        crc = CRCGet(t[i].data, t[i].data_len);
        if (crc != t[i].out) {
            printf("failed crc: 0x%X should 0x%X\n", crc, t[i].out);
        } else {
            printf("success crc: 0x%X\n", crc);
        }
    }
    return 0;
}
